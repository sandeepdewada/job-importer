{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajum/job-importer/client/components/LogTable.js"],"sourcesContent":["export default function LogTable({ logs }) {\r\n  if (!Array.isArray(logs) || logs.length === 0) {\r\n    return <div className=\"center muted\">No import logs yet.</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"table-wrap\">\r\n      <table className=\"log-table\" cellSpacing=\"0\" cellPadding=\"8\">\r\n        <thead>\r\n          <tr>\r\n            <th>File Name</th>\r\n            <th>Total</th>\r\n            <th>New</th>\r\n            <th>Updated</th>\r\n            <th>Failed</th>\r\n            <th>Timestamp</th>\r\n            <th>Failed Reasons</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {logs.map((l) => (\r\n            <tr key={l._id || l.timestamp}>\r\n              <td>{l.fileName || \"—\"}</td>\r\n              <td>{l.totalFetched ?? 0}</td>\r\n              <td>{l.newJobs ?? 0}</td>\r\n              <td>{l.updatedJobs ?? 0}</td>\r\n              <td>{l.failedJobs ?? 0}</td>\r\n              <td>{new Date(l.timestamp || l.createdAt || Date.now()).toLocaleString()}</td>\r\n              <td style={{ maxWidth: 400, overflowWrap: \"anywhere\" }}>\r\n                {Array.isArray(l.failedReasons) && l.failedReasons.length > 0\r\n                  ? l.failedReasons.join(\"; \")\r\n                  : \"—\"}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAe,SAAS,SAAS,EAAE,IAAI,EAAE;IACvC,IAAI,CAAC,MAAM,OAAO,CAAC,SAAS,KAAK,MAAM,KAAK,GAAG;QAC7C,qBAAO,qKAAC;YAAI,WAAU;sBAAe;;;;;;IACvC;IAEA,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YAAM,WAAU;YAAY,aAAY;YAAI,aAAY;;8BACvD,qKAAC;8BACC,cAAA,qKAAC;;0CACC,qKAAC;0CAAG;;;;;;0CACJ,qKAAC;0CAAG;;;;;;0CACJ,qKAAC;0CAAG;;;;;;0CACJ,qKAAC;0CAAG;;;;;;0CACJ,qKAAC;0CAAG;;;;;;0CACJ,qKAAC;0CAAG;;;;;;0CACJ,qKAAC;0CAAG;;;;;;;;;;;;;;;;;8BAGR,qKAAC;8BACE,KAAK,GAAG,CAAC,CAAC,kBACT,qKAAC;;8CACC,qKAAC;8CAAI,EAAE,QAAQ,IAAI;;;;;;8CACnB,qKAAC;8CAAI,EAAE,YAAY,IAAI;;;;;;8CACvB,qKAAC;8CAAI,EAAE,OAAO,IAAI;;;;;;8CAClB,qKAAC;8CAAI,EAAE,WAAW,IAAI;;;;;;8CACtB,qKAAC;8CAAI,EAAE,UAAU,IAAI;;;;;;8CACrB,qKAAC;8CAAI,IAAI,KAAK,EAAE,SAAS,IAAI,EAAE,SAAS,IAAI,KAAK,GAAG,IAAI,cAAc;;;;;;8CACtE,qKAAC;oCAAG,OAAO;wCAAE,UAAU;wCAAK,cAAc;oCAAW;8CAClD,MAAM,OAAO,CAAC,EAAE,aAAa,KAAK,EAAE,aAAa,CAAC,MAAM,GAAG,IACxD,EAAE,aAAa,CAAC,IAAI,CAAC,QACrB;;;;;;;2BAVC,EAAE,GAAG,IAAI,EAAE,SAAS;;;;;;;;;;;;;;;;;;;;;AAkBzC","debugId":null}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajum/job-importer/client/pages/index.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport LogTable from \"../components/LogTable\";\r\n\r\nexport default function Home() {\r\n  const API = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000\";\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [importing, setImporting] = useState(false);\r\n  const [message, setMessage] = useState(null);\r\n\r\n const fetchLogs = async () => {\r\n  setLoading(true);\r\n  try {\r\n    const res = await axios.get(`${API}/api/jobs/logs?ts=${Date.now()}`);\r\n    setLogs(res.data.logs || []);\r\n  } catch (err) {\r\n    console.error(\"Error fetching logs:\", err);\r\n    setMessage({ type: \"error\", text: \"Failed to load logs\" });\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  const runImportNow = async () => {\r\n    setImporting(true);\r\n    setMessage(null);\r\n    try {\r\n      const res = await axios.get(`${API}/api/jobs/import`, { timeout: 120000 });\r\n      setMessage({ type: \"success\", text: `Queued ${res.data.total} jobs` });\r\n    \r\n      setTimeout(fetchLogs, 1500);\r\n    } catch (err) {\r\n      console.error(\"Error triggering import:\", err);\r\n      setMessage({ type: \"error\", text: \"Import trigger failed\" });\r\n    } finally {\r\n      setImporting(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchLogs();\r\n    //poll every 30s for updates\r\n    const interval = setInterval(fetchLogs, 30000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <header className=\"header\">\r\n        <div>\r\n          <h1>Job Importer — Import History</h1>\r\n          <p className=\"muted\">View import runs and trigger manual import</p>\r\n        </div>\r\n        <div className=\"actions\">\r\n          <button className=\"btn btn-primary\" onClick={runImportNow} disabled={importing}>\r\n            {importing ? \"Queuing jobs...\" : \"Run Import Now\"}\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      {message && (\r\n        <div\r\n          className={`alert ${message.type === \"error\" ? \"alert-error\" : \"alert-success\"}`}\r\n        >\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      <main>\r\n        {loading ? (\r\n          <div className=\"center\">Loading logs...</div>\r\n        ) : (\r\n          <LogTable logs={logs} />\r\n        )}\r\n      </main>\r\n\r\n      <footer className=\"footer\">\r\n        <small>Backend: {API} · Auto-refresh every 30s</small>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;;;;AAEe,SAAS;IACtB,MAAM,MAAM,6DAAmC;IAC/C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+GAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IAExC,MAAM,YAAY;QACjB,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,qHAAK,CAAC,GAAG,CAAC,GAAG,IAAI,kBAAkB,EAAE,KAAK,GAAG,IAAI;YACnE,QAAQ,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE;QAC7B,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,wBAAwB;YACtC,WAAW;gBAAE,MAAM;gBAAS,MAAM;YAAsB;QAC1D,SAAU;YACR,WAAW;QACb;IACF;IAGE,MAAM,eAAe;QACnB,aAAa;QACb,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,qHAAK,CAAC,GAAG,CAAC,GAAG,IAAI,gBAAgB,CAAC,EAAE;gBAAE,SAAS;YAAO;YACxE,WAAW;gBAAE,MAAM;gBAAW,MAAM,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAAC;YAEpE,WAAW,WAAW;QACxB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,WAAW;gBAAE,MAAM;gBAAS,MAAM;YAAwB;QAC5D,SAAU;YACR,aAAa;QACf;IACF;IAEA,IAAA,gHAAS,EAAC;QACR;QACA,4BAA4B;QAC5B,MAAM,WAAW,YAAY,WAAW;QACxC,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAO,WAAU;;kCAChB,qKAAC;;0CACC,qKAAC;0CAAG;;;;;;0CACJ,qKAAC;gCAAE,WAAU;0CAAQ;;;;;;;;;;;;kCAEvB,qKAAC;wBAAI,WAAU;kCACb,cAAA,qKAAC;4BAAO,WAAU;4BAAkB,SAAS;4BAAc,UAAU;sCAClE,YAAY,oBAAoB;;;;;;;;;;;;;;;;;YAKtC,yBACC,qKAAC;gBACC,WAAW,CAAC,MAAM,EAAE,QAAQ,IAAI,KAAK,UAAU,gBAAgB,iBAAiB;0BAE/E,QAAQ,IAAI;;;;;;0BAIjB,qKAAC;0BACE,wBACC,qKAAC;oBAAI,WAAU;8BAAS;;;;;yCAExB,qKAAC,uJAAQ;oBAAC,MAAM;;;;;;;;;;;0BAIpB,qKAAC;gBAAO,WAAU;0BAChB,cAAA,qKAAC;;wBAAM;wBAAU;wBAAI;;;;;;;;;;;;;;;;;;AAI7B","debugId":null}}]
}